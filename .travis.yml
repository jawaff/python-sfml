env:
  global:
    - SFML_VERSION=2.3.2

matrix:
  include:
  - os: linux
    language: python
    python: "2.7"
  - os: linux
    language: python
    python: "3.7-dev"
  - os: windows
    # Travis' Windows Env doesn't support a Python language.
    language: shell

before_install:
  - chmod +x scripts/sfml_install.sh
  # The '.' executes this script within the current Bash shell.
  - . scripts/sfml_install.sh $TRAVIS_OS_NAME $SFML_VERSION
  # We can only support up to Python 3.6.6, because our SFML-2.3.2 and Python 3.6.6 are compiled against VS14 (2015).
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then export PYTHON_VERSION='3.6.6'; fi
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then export PYTHON_HOME='C:\Python36'; fi
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then export VS14_BIN='C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin'; fi
  # Sets up the python/pip/vs14 environment that is expected later in this script for Windows.
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then powershell -ExecutionPolicy RemoteSigned -File ./scripts/windows_env_setup.ps1 $PYTHON_VERSION $PYTHON_HOME; fi
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then export PATH="$PYTHON_HOME:$PYTHON_HOME\Scripts:$VS14_BIN:$PATH"; fi
    
notifications:
  email: false

install:
  - pip install -r requirements.txt
  - python setup.py build

script:
-  ls build/

before_deploy:
  - ls
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then ls __pycache__; fi

deploy:
  provider: pypi
  user: jawaff
  password:
    secure: uKgDHmH3lWednGmjayYTbTs9kcANeFUdNyXRniZJdhEr0yIp7izcTXy7huxisKpNHzv8mlwsWMpKKtCB4Hck44g63lCHgmETlIMGMM8CHT2syP2efo59DvdeXUXgCWL9FegdZ98g6HF6VK+cnEVMSLC14hDEYfiOFINUf3fpljwN0xD8nLLRKCpGD8rgjurCWG0U9OytnKkerwlDqR4/4RIpeNhMcttVaGTlinQFSME44wXeUDDVPyi7gt3w2vrveBDHv1buxLOjrMuEwsnj1cgJyvJ+b5F7i9FifIK1BxOCY2q9nS9O50sFh+oAZVz+Ranz/cHOuR9Wfpp0BHdw4sFAOLXFg9dyBC4Ks0HSpHBMmduZVc7US/RxEfYnTPDfPb1nNYW6gY7k6yJ9Hg0PK9GxMVeEYEGR6a2yplonAAfs2P2gogpcxbjCUMEaubhRo4+ylySBvCmFPYuwAL5np8fbHvGBQyxaxIlV8YjRhnfbn8a406toc2kWmHtrI4tvieaAYS/v7hVfcgkIwsipPefcp4qQLfvont26SLAzqraTJaf7baiAOj3hmSQ+QMkAoVoL05Ss2OFi47iL27wDPO+4xXNklprkERkImmr5z4/FheOLI9i0ZKWdK7XAue63IPeUBKXB6NY3E2WRHTXYynbCmEb1AIDnAHDK3W4AW8Y=
  distributions: sdist bdist_wheel
  on:
    branch: master
    tags: true
